---
name: Upload Translations to Koro i18n

'on':
  push:
    branches:
      - main
    paths:
      - 'main/**'
      - 'newtab/**'
      - 'settings/**'
      - 'profile-manager/**'
      - 'welcome/**'
      - 'notes/**'
      - 'stub-win64-installer/**'
      - '.koro-i18n.repo.config.toml'
  workflow_dispatch:

jobs:
  upload-translations:
    runs-on: ubuntu-latest
    permissions:
      id-token: write  # Required for OIDC authentication
      contents: read

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0  # Fetch full history for git history tracking

      - name: Upload translations to Koro i18n
        uses: f3liz-dev/koro-i18n/.github/actions/upload-translations@main
        with:
          project-name: floorp-i18n-unofficial
          mode: structured
